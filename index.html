<!DOCTYPE html>
<html lang="fa" dir="rtl">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>Water Tank - ØªØ§Ù†Ú©Ø±Ù‡Ø§ÛŒ Ø¢Ø¨</title>

  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

  <link rel="stylesheet" href="style.css?v=1.1">
  <style>
    body {
      touch-action: none;
    }
  </style>
</head>

<body>

  <header class="site-header">
    <div class="header-content">
      <i class="fas fa-faucet-drip"></i>
      <h1>ØªØ§Ù†Ú©Ø±Ù‡Ø§ÛŒ Ø§Ø³ØªÙ‚Ø±Ø§Ø±ÛŒØ§ÙØªÙ‡ Ø¯Ø± Ø³Ø·Ø­ Ø´Ù‡Ø± Ø¨Ø§Ù†Ù‡</h1>
    </div>
  </header>

  <div id="map"></div>


  <!-- legend  -->
  <div id="legend">
    <div class="legend-item">
      <div class="water-icon-5k"> <i class="fas fa-glass-water"></i>
      </div>
      <span>Ûµ Ù‡Ø²Ø§Ø± Ù„ÛŒØªØ±</span>
    </div>

    <div class="legend-item">
      <div class="water-icon"> <i class="fas fa-glass-water"></i></div>
      <span>Û±Û° Ù‡Ø²Ø§Ø± Ù„ÛŒØªØ±</span>
    </div>
  </div>

  <!-- legend finish -->



  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/proj4js/2.9.0/proj4.js"></script>

  <script>
    // 1. ØªØ¹Ø±ÛŒÙ Ø³ÛŒØ³ØªÙ… Ù…Ø®ØªØµØ§Øª UTM Ø¨Ø±Ø§ÛŒ Ø¨Ø§Ù†Ù‡ (Zone 38N)
    const utmProjection = "+proj=utm +zone=38 +datum=WGS84 +units=m +no_defs";

    function convertUtmToLatLng(easting, northing) {
      const result = proj4(utmProjection, 'EPSG:4326', [easting, northing]);
      return [result[1], result[0]];
    }

    // === ØªØ§Ø¨Ø¹  Ø¨Ø±Ø§ÛŒ Ø§Ø´ØªØ±Ø§Ú©â€ŒÚ¯Ø°Ø§Ø±ÛŒ Ù…ÙˆÙ‚Ø¹ÛŒØª ===
    function shareLocation(lat, lng, name) {
      const mapLink = `https://www.google.com/maps?q=${lat},${lng}`;
      const shareData = {
        title: 'Ø§Ø´ØªØ±Ø§Ú© Ú¯Ø°Ø§Ø±ÛŒ Ù…ÙˆÙ‚Ø¹ÛŒØª ØªØ§Ù†Ú©Ø± Ø¢Ø¨',
        text: `ğŸ“ Ù…ÙˆÙ‚Ø¹ÛŒØª ØªØ§Ù†Ú©Ø± Ø¢Ø¨:\n${name}\n\n`,
        url: mapLink
      };

      // Ø§Ú¯Ø± Ù…Ø±ÙˆØ±Ú¯Ø± Ù‚Ø§Ø¨Ù„ÛŒØª Share Ø¯Ø§Ø´Øª (Ù…ÙˆØ¨Ø§ÛŒÙ„)
      if (navigator.share) {
        navigator.share(shareData).catch((err) => console.log('Error sharing:', err));
      } else {
        // Ø§Ú¯Ø± Ú©Ø§Ù…Ù¾ÛŒÙˆØªØ± Ø¨ÙˆØ¯ØŒ Ù„ÛŒÙ†Ú© Ø±Ø§ Ú©Ù¾ÛŒ Ú©Ù†
        navigator.clipboard.writeText(`${shareData.text} ${shareData.url}`).then(() => {
          alert('Ù„ÛŒÙ†Ú© Ùˆ Ù…ØªÙ† Ù…ÙˆÙ‚Ø¹ÛŒØª Ú©Ù¾ÛŒ Ø´Ø¯! Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ø¯Ø± Ù¾ÛŒØ§Ù…â€ŒØ±Ø³Ø§Ù†â€ŒÙ‡Ø§ Paste Ú©Ù†ÛŒØ¯.');
        });
      }
    }

    // 2. Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ Ù†Ù‚Ø´Ù‡
    const map = L.map('map', {
      zoomControl: false
    }).setView([35.997, 45.887], 14);

    L.control.zoom({ position: 'bottomleft' }).addTo(map);

    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      attribution: 'Â© OpenStreetMap',
      maxZoom: 19
    }).addTo(map);



    // --- Ù…Ø§Ø±Ú©Ø± ØªØ§Ù†Ú©Ø± 10 Ù‡Ø²Ø§Ø± Ù„ÛŒØªØ±ÛŒ (ÙØ¹Ù„ÛŒ) ---
    const icon10k = L.divIcon({
      className: 'icon-10k',
      html: "<div class='water-icon'><i class='fas fa-glass-water'></i></div>",
      iconSize: [32, 32],
      iconAnchor: [16, 16],
      popupAnchor: [0, -10]
    });

    // --- Ù…Ø§Ø±Ú©Ø± ØªØ§Ù†Ú©Ø± 5000 Ù„ÛŒØªØ±ÛŒ (Ù†ØµÙ Ø³ÙÛŒØ¯) ---
    const icon5k = L.divIcon({
      className: 'icon-5k',
      html: "<div class='water-icon-5k'><i class='fas fa-glass-water'></i></div>",
      iconSize: [32, 32],
      iconAnchor: [16, 16],
      popupAnchor: [0, -10]
    });

    // --- Ù…Ø§Ø±Ú©Ø± Ù…Ø¯Ø§Ø±Ø³ (Ø¢ÛŒÚ©ÙˆÙ† Ù…Ø¯Ø±Ø³Ù‡ Ø¢Ø¨ÛŒ) ---
    const iconSchool = L.divIcon({
      className: 'icon-school',
      html: "<div class='school-icon'><i class='fas fa-school'></i></div>",
      iconSize: [32, 32],
      iconAnchor: [16, 16],
      popupAnchor: [0, -10]
    });

    // 4. Ù„ÛŒØ³Øª Ù†Ù‚Ø§Ø· (Ù…Ø®ØªØµØ§Øª Ø¬Ø¯ÛŒØ¯ Ø·Ø¨Ù‚ ÙØ§ÛŒÙ„ Ø§Ú©Ø³Ù„)
    const waterPointsUTM = [
      { id: 1, name: "Ø¢ØªØ´ Ù†Ø´Ø§Ù†ÛŒ Ø¢Ø²Ø§Ø¯Ú¯Ø§Ù†", x: 579250, y: 3984558, type: "10k" },
      { id: 2, name: "Ø¨Ù†ÛŒØ§Ø¯ Ù…Ø³Ú©Ù†", x: 577716, y: 3985485, type: "10k" },
      { id: 3, name: "Ù¾Ù…Ù¾ Ø¨Ù†Ø²ÛŒÙ† Ø³ÛŒØ§Ø±", x: 579528, y: 3984865, type: "10k" },
      { id: 4, name: "Ø§Ø¯Ø§Ø±Ù‡ Ø¨Ù‡Ø²ÛŒØ³ØªÛŒ (Û±Û°Û° Ù…ØªØ± Ù¾Ø§ÛŒÛŒÙ† ØªØ± Ø§Ø² Ø¯Ø±Ø¨ ÙˆØ±ÙˆØ¯ÛŒ)", x: 580068, y: 3984407, type: "10k" },
      { id: 5, name: "Ø¢ØªØ´ Ù†Ø´Ø§Ù†ÛŒ ØªØ±Ø®Ø§Ù† Ø¢Ø¨Ø§Ø¯ (Ø¬Ù†Ø¨ Ø¯Ø±Ø¨ ÙˆØ±ÙˆØ¯ÛŒ)", x: 581340, y: 3983263, type: "10k" },
      { id: 6, name: "Ù…Ø¯Ø±Ø³Ù‡ Ø´Ø¨Ù„ÛŒ", x: 580693, y: 3982741, type: "10k" },
      { id: 7, name: "ÙØ±Ù…Ø§Ù†Ø¯Ø§Ø±ÛŒ (Ø§ÙˆÙ„ Ú©ÙˆÚ†Ù‡ Ø²Ù†Ø¯Ø§Ù†)", x: 580029, y: 3982725 },
      { id: 8, name: "Ø§Ø¯Ø§Ø±Ù‡ Ú©Ø§Ø± (Û³Û° Ù…ØªØ± Ù¾Ø§ÛŒÛŒÙ† ØªØ± Ø§Ø² Ø¯Ø±Ø¨ ÙˆØ±ÙˆØ¯ÛŒ Ø¨Ù‡ Ø·Ø±Ù ØªØ§Ù„Ø§Ø± Ú†ÙˆÙ¾ÛŒ)", x: 578859, y: 3983516, type: "10k" },
      { id: 9, name: "Ù…Ø¯Ø±Ø³Ù‡ Ø¨Ù†ÛŒ Ø±Ø²Ø§Ù†", x: 576825, y: 3984376, type: "10k" },
      { id: 10, name: "ÙÙ†ÛŒ Ø­Ø±ÙÙ‡ Ø§ÛŒ (Ø¬Ù†Ø¨ Ø¯Ø±Ø¨ ÙˆØ±ÙˆØ¯ÛŒ Ø³Ø§Ø®ØªÙ…Ø§Ù†)", x: 578322, y: 3983872, type: "10k" },
      { id: 11, name: "Ø§Ø¯Ø§Ø±Ù‡ Ù…Ø®Ø§Ø¨Ø±Ø§Øª (Ø¯ÛŒÙˆØ§Ø± Ù¾Ø´ØªÛŒ Ø§Ø¯Ø§Ø±Ù‡)", x: 580023, y: 3983618 },
      { id: 12, name: "Ø§Ø¯Ø§Ø±Ù‡ Ø¢Ù…ÙˆØ²Ø´ Ùˆ Ù¾Ø±ÙˆØ±Ø´ (Ú©ÙˆÚ†Ù‡ Ø¬Ù†Ø¨ Ø¢Ù…ÙˆØ²Ø´ Ù¾Ø±ÙˆØ±Ø´ Ø±ÙˆØ¨Ø±ÙˆÛŒ Ø§Ø¯Ø§Ø±Ù‡ Ø¨Ø±Ù‚)", x: 580493, y: 3983191, type: "10k" },
      { id: 13, name: "Ù…Ø¯Ø±Ø³Ù‡ Ø§Ù…Ø§Ù… Ø®Ù…ÛŒÙ†ÛŒ (Ø¬Ø§Ø¯Ù‡ Ø³Ù„ÛŒÙ…Ø§Ù†ÛŒÙ‡)", x: 578295, y: 3984241, type: "10k" },
      { id: 14, name: "Ù…Ø¯Ø±Ø³Ù‡ Ú©Ø§ÙˆÙ‡ Ù…Ø­Ù…Ø¯ÛŒ (Ú†Ù‡Ø§Ø± Ø±Ø§Ù‡ Ø«Ø¨Øª Ø§Ø­ÙˆØ§Ù„)", x: 579580, y: 3982887, type: "10k" },
      { id: 15, name: "Ù…Ø¯Ø±Ø³Ù‡ Ø¯Ù…Ø§Ù…Ù‡ (Ø¶Ù„Ø¹ Ø´Ø±Ù‚ÛŒ Ù…Ø¯Ø±Ø³Ù‡)", x: 582429, y: 3982069, type: "10k" },
      { id: 16, name: "Ù…Ø¯Ø±Ø³Ù‡ Ú©ÙˆÛŒ ÙØ±Ù‡Ù†Ú¯ÛŒØ§Ù† (ÙˆØ±ÙˆØ¯ÛŒ Ø²Ù…ÛŒÙ† Ú†Ù…Ù†)", x: 580731, y: 3984473, type: "10k" },
      { id: 17, name: "Ù…Ø¯Ø±Ø³Ù‡ Ø´Ù‡Ø±Ú© Ù†ÙˆØ±", x: 581515, y: 3982600, type: "10k" },
      { id: 18, name: "Ù…Ø¯Ø±Ø³Ù‡ Ø§Ø­Ù…Ø¯ Ø¢Ø¨Ø§Ø¯ Ø¬Ù†Ø¨ Ù…Ø³Ú©Ù† Ù…Ù‡Ø±Ù‡Ø§", x: 581447, y: 3984176, type: "10k" },
      { id: 19, name: "ØªÛŒØ±Ú†Ù‡ Ø³Ø¹ÛŒØ¯Ù¾ÙˆØ± ØªØ±Ø®Ø§Ù† Ø¢Ø¨Ø§Ø¯", x: 581650, y: 3983122, type: "10k" },
      { id: 20, name: "Ù…Ø¯Ø±Ø³Ù‡ Ø¨ÛŒÙ† ØªØ±Ø®Ø§Ù† Ø¢Ø¨Ø§Ø¯ Ùˆ Ù…ÙˆÙ„ÙˆÛŒ", x: 581787, y: 3983164, type: "10k" },
      { id: 21, name: "Ø¨Ø§Ø´Ú¯Ø§Ù‡ ØµÙØ±ÛŒ", x: 581032, y: 3983103, type: "10k" },
      { id: 22, name: "Ø¹Ø«Ù…Ø§Ù† Ø¢Ø¨Ø§Ø¯", x: 581592, y: 3982084, type: "10k" },
      { id: 23, name: "Ø§ØªÙØ§Ù‚Ø§Øª Ø§Ø¯Ø§Ø±Ù‡ Ø¢Ø¨ (ÛµÛ° Ù…ØªØ± Ø¨Ø§Ù„Ø§ØªØ± Ø§Ø² Ø¯Ø±Ø¨ ÙˆØ±ÙˆØ¯ÛŒ Ø±ÙˆØ¨Ø±ÙˆÛŒ Ú©Ù…ÛŒØªÙ‡ Ø§Ù…Ø¯Ø§Ø¯)", x: 580710, y: 3982470, type: "10k" },
      { id: 24, name: "Ù…Ø¯Ø±Ø³Ù‡ Ø¯Ú©ØªØ± Ø­Ø³Ø§Ø¨ÛŒ", x: 580810, y: 3983465, type: "10k" },
      { id: 25, name: "Ø­ÛŒØ§Ø· Ø´Ø®ØµÛŒ ÙˆØ§Ù‚Ø¹ Ø¯Ø± Ù†Ø¨Ø´ Ú©Ù…Ø±Ø¨Ù†Ø¯ÛŒ Û² Ùˆ Ø®ÛŒØ§Ø¨Ø§Ù† Ø§Ù…Ø§Ú©Ù†", x: 579840, y: 3982431, type: "10k" },
      { id: 26, name: "Ø¯Ø±Ù…Ø§Ù†Ú¯Ø§Ù‡ ØªØ®ØµØµÛŒ Ø¨ÛŒÙ…Ø§Ø±Ø³ØªØ§Ù† ØµÙ„Ø§Ø­ Ø§Ù„Ø¯ÛŒÙ†", x: 579862, y: 3982912, type: "10k" },
      { id: 27, name: "Ù…Ø®Ø§Ø¨Ø±Ø§Øª Ø³Ø§Ø¨Ù‚", x: 580176, y: 3983412, type: "10k" },
      { id: 28, name: "Ù¾Ø§Ø±Ú© Ù…Ø³Ú©Ù† Ù…Ù‡Ø± Ù…ÛŒØ¯Ø§Ù† Ú¯Ø§Ø²", x: 580735, y: 3984962, type: "10k" },
      { id: 29, name: "Ø³Ù¾Ø§Ù‡ ØµØ§Ù„Ø­ Ø¢Ø¨Ø§Ø¯", x: 578993, y: 3984812, type: "10k" },
      { id: 30, name: "Ø®Ø§Ù†Ù‡ Ø³Ø§Ø²Ù…Ø§Ù†ÛŒ Ù‡Ù†Ú¯ Ù…Ø±Ø²ÛŒ ÙˆØ§Ù‚Ø¹ Ø¯Ø± Ù…ÛŒØ¯Ø§Ù† Ø´ÙˆØ±Ø§", x: 578502, y: 3984978, type: "10k" },
      { id: 31, name: "Ù…Ø¯Ø±Ø³Ù‡ Ø´Ù‡Ø±Ú© Ø±ÙØ§Ù‡ Ø¨Ù„ÙˆØ§Ø± Ú©Ø±Ø¯Ø³ØªØ§Ù†", x: 577615, y: 3984800, type: "10k" },
      { id: 33, name: "Ø§Ø±ØªØ´", x: 579167, y: 3983139, type: "10k" },
      { id: 34, name: "Ù…Ø³Ø¬Ø¯ ÙˆØ§Ù‚Ø¹ Ø¯Ø± Ø´Ù‡Ø±Ú© Ù„Ø§Ù„Ù‡", x: 577447, y: 3984117, type: "10k" },
      { id: 35, name: "Ø¨Ø§Ø´Ú¯Ø§Ù‡ Ú¯Ù„Ø´Ù‡Ø±", x: 578619, y: 3984049, type: "10k" },
      { id: 36, name: "Ù…Ø¯Ø±Ø³Ù‡ ÙÙ†ÛŒ Ø­Ø±ÙÙ‡ Ø§ÛŒ Ø³Ù„ÛŒÙ…Ø§Ù† Ø®Ø§Ø·Ø±", x: 579006, y: 3984048, type: "10k" },
      { id: 37, name: "Ù…Ø³Ø¬Ø¯ ÙˆØ§Ù‚Ø¹ Ø¯Ø± Ø´Ù‡Ø±Ú© Ø¯Ø§Ø¯Ú¯Ø³ØªØ±ÛŒ", x: 578242, y: 3984984, type: "10k" },
      { id: 38, name: "Ù…Ø¯Ø±Ø³Ù‡ Ù…Ù„Ø§ØµØ§Ù„Ø­ Ø§Ø­Ù…Ø¯ÛŒ Ù…Ø­Ù„Ù‡ Ù¾ÛŒØ±Ù…Ø±Ø§Ø¯", x: 581170, y: 3982178, type: "10k" },
      { id: 39, name: "Ø§Ø±Ø´Ø§Ø¯ Ø§Ø³Ù„Ø§Ù…ÛŒ ÙˆØ±ÙˆØ±ÛŒ Ø±ÙˆØ¨Ø±ÙˆÛŒ ÙÙ„Ú©Ù‡ Ù‡Ù†Ø±", x: 580200, y: 3983696, type: "10k" },
      { id: 40, name: "Ø¨Ù„ÙˆØ§Ø± Ø¨Ù„Ø§Ù„ Ø­Ø¨Ø´ÛŒ", x: 580276, y: 3984894, type: "10k" },
    ];

    // 5. Ø­Ù„Ù‚Ù‡ Ø¨Ø±Ø§ÛŒ Ø§ÛŒØ¬Ø§Ø¯ Ù…Ø§Ø±Ú©Ø±Ù‡Ø§
    waterPointsUTM.forEach(point => {
      // Ø¨Ø±Ø±Ø³ÛŒ Ø§ÛŒÙ†Ú©Ù‡ Ù…Ø®ØªØµØ§Øª ÙˆØ¬ÙˆØ¯ Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´Ø¯
      if (!point.x || !point.y) return;

      const latLng = convertUtmToLatLng(point.x, point.y);

      let iconToUse = icon10k;

      if (point.type === "5k") iconToUse = icon5k;
      if (point.type === "school") iconToUse = iconSchool;

      const marker = L.marker(latLng, { icon: iconToUse }).addTo(map);

      const googleMapsUrl = `https://www.google.com/maps?q=${latLng[0]},${latLng[1]}`;

      const popupContent = `
        <div class="popup-content">
          <h3>${point.name}</h3>
          <p>Ú©Ø¯ Ù†Ù‚Ø·Ù‡: ${point.id}</p>
          
          <a href="${googleMapsUrl}" target="_blank" class="navigate-btn">
            <i class="fas fa-location-arrow"></i> Ù…Ø³ÛŒØ±ÛŒØ§Ø¨ÛŒ
          </a>
          
          <button class="share-btn" onclick="shareLocation(${latLng[0]}, ${latLng[1]}, '${point.name}')">
            <i class="fas fa-share-nodes"></i> Ø§Ø±Ø³Ø§Ù„ Ù…ÙˆÙ‚Ø¹ÛŒØª
          </button>
        </div>
      `;

      marker.bindPopup(popupContent, {
        className: 'custom-popup'
      });
    });

  </script>
</body>

</html>