<!DOCTYPE html>
<html lang="fa" dir="rtl">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>Water Tank - ØªØ§Ù†Ú©Ø±Ù‡Ø§ÛŒ Ø¢Ø¨</title>

  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

  <link rel="stylesheet" href="style.css?v=1.1">
  <style>
    body {
      touch-action: none;
    }
  </style>
</head>

<body>

  <header class="site-header">
    <div class="header-content">
      <i class="fas fa-faucet-drip"></i>
      <h1>ØªØ§Ù†Ú©Ø±Ù‡Ø§ÛŒ Ø§Ø³ØªÙ‚Ø±Ø§Ø±ÛŒØ§ÙØªÙ‡ Ø¯Ø± Ø³Ø·Ø­ Ø´Ù‡Ø± Ø¨Ø§Ù†Ù‡</h1>
    </div>
  </header>

  <div id="map"></div>


  <!-- legend  -->
  <div id="legend">
    <div class="legend-item">
      <div class="water-icon-5k"> <i class="fas fa-glass-water"></i>
      </div>
      <span>Ûµ Ù‡Ø²Ø§Ø± Ù„ÛŒØªØ±</span>
    </div>

    <div class="legend-item">
      <div class="water-icon"> <i class="fas fa-glass-water"></i></div>
      <span>Û±Û° Ù‡Ø²Ø§Ø± Ù„ÛŒØªØ±</span>
    </div>
  </div>

  <!-- legend finish -->



  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

  <script>


    // === ØªØ§Ø¨Ø¹  Ø¨Ø±Ø§ÛŒ Ø§Ø´ØªØ±Ø§Ú©â€ŒÚ¯Ø°Ø§Ø±ÛŒ Ù…ÙˆÙ‚Ø¹ÛŒØª ===
    function shareLocation(lat, lng, name) {
      const mapLink = `https://www.google.com/maps?q=${lat},${lng}`;
      const shareData = {
        title: 'Ø§Ø´ØªØ±Ø§Ú© Ú¯Ø°Ø§Ø±ÛŒ Ù…ÙˆÙ‚Ø¹ÛŒØª ØªØ§Ù†Ú©Ø± Ø¢Ø¨',
        text: `ğŸ“ Ù…ÙˆÙ‚Ø¹ÛŒØª ØªØ§Ù†Ú©Ø± Ø¢Ø¨:\n${name}\n\n`,
        url: mapLink
      };

      // Ø§Ú¯Ø± Ù…Ø±ÙˆØ±Ú¯Ø± Ù‚Ø§Ø¨Ù„ÛŒØª Share Ø¯Ø§Ø´Øª (Ù…ÙˆØ¨Ø§ÛŒÙ„)
      if (navigator.share) {
        navigator.share(shareData).catch((err) => console.log('Error sharing:', err));
      } else {
        // Ø§Ú¯Ø± Ú©Ø§Ù…Ù¾ÛŒÙˆØªØ± Ø¨ÙˆØ¯ØŒ Ù„ÛŒÙ†Ú© Ø±Ø§ Ú©Ù¾ÛŒ Ú©Ù†
        navigator.clipboard.writeText(`${shareData.text} ${shareData.url}`).then(() => {
          alert('Ù„ÛŒÙ†Ú© Ùˆ Ù…ØªÙ† Ù…ÙˆÙ‚Ø¹ÛŒØª Ú©Ù¾ÛŒ Ø´Ø¯! Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ø¯Ø± Ù¾ÛŒØ§Ù…â€ŒØ±Ø³Ø§Ù†â€ŒÙ‡Ø§ Paste Ú©Ù†ÛŒØ¯.');
        });
      }
    }

    // 2. Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ Ù†Ù‚Ø´Ù‡
    const map = L.map('map', {
      zoomControl: false
    }).setView([35.997, 45.887], 14);

    L.control.zoom({ position: 'bottomleft' }).addTo(map);

    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      attribution: 'Â© OpenStreetMap',
      maxZoom: 19
    }).addTo(map);



    // 1. ØªØ¹Ø±ÛŒÙ Ø¢ÛŒÚ©ÙˆÙ†â€ŒÙ‡Ø§ (Ø¨Ø¯ÙˆÙ† ØªØºÛŒÛŒØ±)
    const icon10k = L.divIcon({ className: 'icon-10k', html: "<div class='water-icon'><i class='fas fa-glass-water'></i></div>", iconSize: [32, 32], iconAnchor: [16, 16], popupAnchor: [0, -10] });
    const icon5k = L.divIcon({ className: 'icon-5k', html: "<div class='water-icon-5k'><i class='fas fa-glass-water'></i></div>", iconSize: [32, 32], iconAnchor: [16, 16], popupAnchor: [0, -10] });
    const iconSchool = L.divIcon({ className: 'icon-school', html: "<div class='school-icon'><i class='fas fa-school'></i></div>", iconSize: [32, 32], iconAnchor: [16, 16], popupAnchor: [0, -10] });

    const waterPoints = [
      { id: 1, name: "Ø¢ØªØ´ Ù†Ø´Ø§Ù†ÛŒ Ø¢Ø²Ø§Ø¯Ú¯Ø§Ù†", lat: 36.002273, lng: 45.879323, type: "10k" },
      { id: 2, name: "Ø¨Ù†ÛŒØ§Ø¯ Ù…Ø³Ú©Ù†", lat: 36.010753, lng: 45.862395, type: "10k" },
      { id: 3, name: "Ù¾Ù…Ù¾ Ø¨Ù†Ø²ÛŒÙ† Ø³ÛŒØ§Ø±", lat: 36.005017, lng: 45.882438, type: "10k" },
      { id: 4, name: "Ø§Ø¯Ø§Ø±Ù‡ Ø¨Ù‡Ø²ÛŒØ³ØªÛŒ (Û±Û°Û° Ù…ØªØ± Ù¾Ø§ÛŒÛŒÙ† ØªØ± Ø§Ø² Ø¯Ø±Ø¨ ÙˆØ±ÙˆØ¯ÛŒ)", lat: 36.000844, lng: 45.888383, type: "10k" },
      { id: 5, name: "Ø¢ØªØ´ Ù†Ø´Ø§Ù†ÛŒ ØªØ±Ø®Ø§Ù† Ø¢Ø¨Ø§Ø¯ (Ø¬Ù†Ø¨ Ø¯Ø±Ø¨ ÙˆØ±ÙˆØ¯ÛŒ)", lat: 35.990426, lng: 45.902377, type: "10k" },
      { id: 6, name: "Ù…Ø¯Ø±Ø³Ù‡ Ø´Ø¨Ù„ÛŒ", lat: 35.985774, lng: 45.895147, type: "10k" },
      { id: 7, name: "ÙØ±Ù…Ø§Ù†Ø¯Ø§Ø±ÛŒ (Ø§ÙˆÙ„ Ú©ÙˆÚ†Ù‡ Ø²Ù†Ø¯Ø§Ù†)", lat: 35.985685, lng: 45.887780, type: "" },
      { id: 8, name: "Ø§Ø¯Ø§Ø±Ù‡ Ú©Ø§Ø± (Û³Û° Ù…ØªØ± Ù¾Ø§ÛŒÛŒÙ† ØªØ± Ø§Ø² Ø¯Ø±Ø¨ ÙˆØ±ÙˆØ¯ÛŒ Ø¨Ù‡ Ø·Ø±Ù ØªØ§Ù„Ø§Ø± Ú†ÙˆÙ¾ÛŒ)", lat: 35.992911, lng: 45.874881, type: "10k" },
      { id: 9, name: "Ù…Ø¯Ø±Ø³Ù‡ Ø¨Ù†ÛŒ Ø±Ø²Ø§Ù†", lat: 36.000826, lng: 45.852401, type: "10k" },
      { id: 10, name: "ÙÙ†ÛŒ Ø­Ø±ÙÙ‡ Ø§ÛŒ (Ø¬Ù†Ø¨ Ø¯Ø±Ø¨ ÙˆØ±ÙˆØ¯ÛŒ Ø³Ø§Ø®ØªÙ…Ø§Ù†)", lat: 35.996163, lng: 45.868960, type: "10k" },
      { id: 11, name: "Ø§Ø¯Ø§Ø±Ù‡ Ù…Ø®Ø§Ø¨Ø±Ø§Øª (Ø¯ÛŒÙˆØ§Ø± Ù¾Ø´ØªÛŒ Ø§Ø¯Ø§Ø±Ù‡)", lat: 35.993735, lng: 45.887804, type: "" },
      { id: 12, name: "Ø§Ø¯Ø§Ø±Ù‡ Ø¢Ù…ÙˆØ²Ø´ Ùˆ Ù¾Ø±ÙˆØ±Ø´ (Ú©ÙˆÚ†Ù‡ Ø¬Ù†Ø¨ Ø¢Ù…ÙˆØ²Ø´ Ù¾Ø±ÙˆØ±Ø´ Ø±ÙˆØ¨Ø±ÙˆÛŒ Ø§Ø¯Ø§Ø±Ù‡ Ø¨Ø±Ù‚)", lat: 35.989847, lng: 45.892974, type: "10k" },
      { id: 13, name: "Ù…Ø¯Ø±Ø³Ù‡ Ø§Ù…Ø§Ù… Ø®Ù…ÛŒÙ†ÛŒ (Ø¬Ø§Ø¯Ù‡ Ø³Ù„ÛŒÙ…Ø§Ù†ÛŒÙ‡)", lat: 35.999492, lng: 45.868697, type: "10k" },
      { id: 14, name: "Ù…Ø¯Ø±Ø³Ù‡ Ú©Ø§ÙˆÙ‡ Ù…Ø­Ù…Ø¯ÛŒ (Ú†Ù‡Ø§Ø± Ø±Ø§Ù‡ Ø«Ø¨Øª Ø§Ø­ÙˆØ§Ù„)", lat: 35.987182, lng: 45.882816, type: "10k" },
      { id: 15, name: "Ù…Ø¯Ø±Ø³Ù‡ Ø¯Ù…Ø§Ù…Ù‡ (Ø¶Ù„Ø¹ Ø´Ø±Ù‚ÛŒ Ù…Ø¯Ø±Ø³Ù‡)", lat: 35.979571, lng: 45.914333, type: "10k" },
      { id: 16, name: "Ù…Ø¯Ø±Ø³Ù‡ Ú©ÙˆÛŒ ÙØ±Ù‡Ù†Ú¯ÛŒØ§Ù† (ÙˆØ±ÙˆØ¯ÛŒ Ø²Ù…ÛŒÙ† Ú†Ù…Ù†)", lat: 36.001385, lng: 45.895745, type: "10k" },
      { id: 17, name: "Ù…Ø¯Ø±Ø³Ù‡ Ø´Ù‡Ø±Ú© Ù†ÙˆØ±", lat: 35.984435, lng: 45.904250, type: "10k" },
      { id: 18, name: "Ù…Ø¯Ø±Ø³Ù‡ Ø§Ø­Ù…Ø¯ Ø¢Ø¨Ø§Ø¯ Ø¬Ù†Ø¨ Ù…Ø³Ú©Ù† Ù…Ù‡Ø±Ù‡Ø§", lat: 35.998648, lng: 45.903658, type: "10k" },
      { id: 19, name: "ØªÛŒØ±Ú†Ù‡ Ø³Ø¹ÛŒØ¯Ù¾ÙˆØ± ØªØ±Ø®Ø§Ù† Ø¢Ø¨Ø§Ø¯", lat: 35.989129, lng: 45.905801, type: "10k" },
      { id: 20, name: "Ù…Ø¯Ø±Ø³Ù‡ Ø¨ÛŒÙ† ØªØ±Ø®Ø§Ù† Ø¢Ø¨Ø§Ø¯ Ùˆ Ù…ÙˆÙ„ÙˆÛŒ", lat: 35.989496, lng: 45.907326, type: "10k" },
      { id: 21, name: "Ø¨Ø§Ø´Ú¯Ø§Ù‡ ØµÙØ±ÛŒ", lat: 35.989009, lng: 45.898944, type: "10k" },
      { id: 22, name: "Ø¹Ø«Ù…Ø§Ù† Ø¢Ø¨Ø§Ø¯", lat: 35.979777, lng: 45.905051, type: "10k" },
      { id: 23, name: "Ø§ØªÙØ§Ù‚Ø§Øª Ø§Ø¯Ø§Ø±Ù‡ Ø¢Ø¨ (ÛµÛ° Ù…ØªØ± Ø¨Ø§Ù„Ø§ØªØ± Ø§Ø² Ø¯Ø±Ø¨ ÙˆØ±ÙˆØ¯ÛŒ Ø±ÙˆØ¨Ø±ÙˆÛŒ Ú©Ù…ÛŒØªÙ‡ Ø§Ù…Ø¯Ø§Ø¯)", lat: 35.983330, lng: 45.895308, type: "10k" },
      { id: 24, name: "Ù…Ø¯Ø±Ø³Ù‡ Ø¯Ú©ØªØ± Ø­Ø³Ø§Ø¨ÛŒ", lat: 35.992291, lng: 45.896519, type: "10k" },
      { id: 25, name: "Ø­ÛŒØ§Ø· Ø´Ø®ØµÛŒ ÙˆØ§Ù‚Ø¹ Ø¯Ø± Ù†Ø¨Ø´ Ú©Ù…Ø±Ø¨Ù†Ø¯ÛŒ Û² Ùˆ Ø®ÛŒØ§Ø¨Ø§Ù† Ø§Ù…Ø§Ú©Ù†", lat: 35.983050, lng: 45.885654, type: "10k" },
      { id: 26, name: "Ø¯Ø±Ù…Ø§Ù†Ú¯Ø§Ù‡ ØªØ®ØµØµÛŒ Ø¨ÛŒÙ…Ø§Ø±Ø³ØªØ§Ù† ØµÙ„Ø§Ø­ Ø§Ù„Ø¯ÛŒÙ†", lat: 35.987384, lng: 45.885947, type: "10k" },
      { id: 27, name: "Ù…Ø®Ø§Ø¨Ø±Ø§Øª Ø³Ø§Ø¨Ù‚", lat: 35.991866, lng: 45.889481, type: "10k" },
      { id: 28, name: "Ù¾Ø§Ø±Ú© Ù…Ø³Ú©Ù† Ù…Ù‡Ø± Ù…ÛŒØ¯Ø§Ù† Ú¯Ø§Ø²", lat: 36.005793, lng: 45.895839, type: "10k" },
      { id: 29, name: "Ø³Ù¾Ø§Ù‡ ØµØ§Ù„Ø­ Ø¢Ø¨Ø§Ø¯", lat: 36.004583, lng: 45.876497, type: "10k" },
      { id: 30, name: "Ø®Ø§Ù†Ù‡ Ø³Ø§Ø²Ù…Ø§Ù†ÛŒ Ù‡Ù†Ú¯ Ù…Ø±Ø²ÛŒ ÙˆØ§Ù‚Ø¹ Ø¯Ø± Ù…ÛŒØ¯Ø§Ù† Ø´ÙˆØ±Ø§", lat: 36.006119, lng: 45.871066, type: "10k" },
      { id: 31, name: "Ù…Ø¯Ø±Ø³Ù‡ Ø´Ù‡Ø±Ú© Ø±ÙØ§Ù‡ Ø¨Ù„ÙˆØ§Ø± Ú©Ø±Ø¯Ø³ØªØ§Ù†", lat: 36.004586, lng: 45.861207, type: "10k" },
      { id: 33, name: "Ø§Ø±ØªØ´", lat: 35.989487, lng: 45.878260, type: "10k" },
      { id: 34, name: "Ù…Ø³Ø¬Ø¯ ÙˆØ§Ù‚Ø¹ Ø¯Ø± Ø´Ù‡Ø±Ú© Ù„Ø§Ù„Ù‡", lat: 35.998442, lng: 45.859277, type: "10k" },
      { id: 35, name: "Ø¨Ø§Ø´Ú¯Ø§Ù‡ Ú¯Ù„Ø´Ù‡Ø±", lat: 35.997735, lng: 45.872272, type: "10k" },
      { id: 36, name: "Ù…Ø¯Ø±Ø³Ù‡ ÙÙ†ÛŒ Ø­Ø±ÙÙ‡ Ø§ÛŒ Ø³Ù„ÛŒÙ…Ø§Ù† Ø®Ø§Ø·Ø±", lat: 35.997695, lng: 45.876565, type: "10k" },
      { id: 37, name: "Ù…Ø³Ø¬Ø¯ ÙˆØ§Ù‚Ø¹ Ø¯Ø± Ø´Ù‡Ø±Ú© Ø¯Ø§Ø¯Ú¯Ø³ØªØ±ÛŒ", lat: 36.006194, lng: 45.868182, type: "10k" },
      { id: 38, name: "Ù…Ø¯Ø±Ø³Ù‡ Ù…Ù„Ø§ØµØ§Ù„Ø­ Ø§Ø­Ù…Ø¯ÛŒ Ù…Ø­Ù„Ù‡ Ù¾ÛŒØ±Ù…Ø±Ø§Ø¯", lat: 35.980659, lng: 45.900380, type: "10k" },
      { id: 39, name: "Ø§Ø±Ø´Ø§Ø¯ Ø§Ø³Ù„Ø§Ù…ÛŒ ÙˆØ±ÙˆØ±ÛŒ Ø±ÙˆØ¨Ø±ÙˆÛŒ ÙÙ„Ú©Ù‡ Ù‡Ù†Ø±", lat: 35.994424, lng: 45.889775, type: "5k" },
      { id: 40, name: "Ø¨Ù„ÙˆØ§Ø± Ø¨Ù„Ø§Ù„ Ø­Ø¨Ø´ÛŒ", lat: 36.005218, lng: 45.890740, type: "10k" }
    ];

    // 3. Ø§ÛŒØ¬Ø§Ø¯ Ú¯Ø±ÙˆÙ‡ Ù„Ø§ÛŒÙ‡ (Ù…Ù‡Ù…ØªØ±ÛŒÙ† Ø¨Ø®Ø´ Ø¨Ø±Ø§ÛŒ Ø³Ø±Ø¹Øª)
    const markersGroup = L.layerGroup();

    waterPoints.forEach(point => {
      let iconToUse = icon10k;
      if (point.type === "5k") iconToUse = icon5k;
      if (point.type === "school") iconToUse = iconSchool;

      // Ø³Ø§Ø®Øª Ù…Ø§Ø±Ú©Ø± Ø¨Ø§ Ù…Ø®ØªØµØ§Øª Ø¢Ù…Ø§Ø¯Ù‡
      const marker = L.marker([point.lat, point.lng], { icon: iconToUse });

      // Ù„ÛŒÙ†Ú© Ù…Ø³ÛŒØ±ÛŒØ§Ø¨ÛŒ Ú¯ÙˆÚ¯Ù„ (Ø§ØµÙ„Ø§Ø­ Ø´Ø¯Ù‡ Ø¨Ø±Ø§ÛŒ Ø³Ø±Ø¹Øª Ø¨Ù‡ØªØ± Ø¯Ø± Ù…ÙˆØ¨Ø§ÛŒÙ„)
      const googleMapsUrl = `https://www.google.com/maps/dir/?api=1&destination=${point.lat},${point.lng}`;

      const popupContent = `
        <div class="popup-content">
          <h3>${point.name}</h3>
          <p>Ú©Ø¯ Ù†Ù‚Ø·Ù‡: ${point.id}</p>
          
          <a href="${googleMapsUrl}" target="_blank" class="navigate-btn">
            <i class="fas fa-location-arrow"></i> Ù…Ø³ÛŒØ±ÛŒØ§Ø¨ÛŒ
          </a>
          
          <button class="share-btn" onclick="shareLocation(${point.lat}, ${point.lng}, '${point.name}')">
            <i class="fas fa-share-nodes"></i> Ø§Ø±Ø³Ø§Ù„ Ù…ÙˆÙ‚Ø¹ÛŒØª
          </button>
        </div>
      `;

      marker.bindPopup(popupContent, { className: 'custom-popup' });

      // Ù†Ú©ØªÙ‡ Ú©Ù„ÛŒØ¯ÛŒ: Ù…Ø§Ø±Ú©Ø± Ø±Ø§ Ø¨Ù‡ Ú¯Ø±ÙˆÙ‡ Ø§Ø¶Ø§ÙÙ‡ Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ…ØŒ Ù†Ù‡ Ù…Ø³ØªÙ‚ÛŒÙ… Ø¨Ù‡ Ù†Ù‚Ø´Ù‡
      markersGroup.addLayer(marker);
    });

    // 4. Ø¯Ø± Ù†Ù‡Ø§ÛŒØª Ú©Ù„ Ú¯Ø±ÙˆÙ‡ Ø±Ø§ ÛŒÚ©â€ŒØ¬Ø§ Ø¨Ù‡ Ù†Ù‚Ø´Ù‡ Ù…ÛŒâ€ŒÚ†Ø³Ø¨Ø§Ù†ÛŒÙ…
    markersGroup.addTo(map);

  </script>
</body>

</html>